(this["webpackJsonpjwt-boilerplate"]=this["webpackJsonpjwt-boilerplate"]||[]).push([[0],{146:function(e,t,n){},147:function(e,t,n){},160:function(e,t,n){},161:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(50),o=n.n(a),s=(n(145),n(146),n(46)),c=n(10),i=(n(147),n(72)),l=n.n(i),u=n(81),j=n(58),p=n(73),d=n(8);function h(e){return Object(d.jsx)("span",{className:"error",children:e.error})}function b(){var e=localStorage.getItem("token");e&&(JSON.parse(atob(e.split(".")[1])).exp<Date.now()/1e3&&(localStorage.removeItem("token"),e=null));return e}var g={setToken:function(e){e?localStorage.setItem("token",e):localStorage.removeItem("token")},getToken:b,removeToken:function(){localStorage.removeItem("token")},getUserFromToken:function(){var e=b();return e?JSON.parse(atob(e.split(".")[1])).user:null}},O="/api/users/";var m={signup:function(e){return fetch(O+"signup",{method:"POST",body:e}).then((function(e){if(e.ok)return e.json();throw new Error("Email already taken!")})).then((function(e){var t=e.token;return g.setToken(t)}))},logout:function(){g.removeToken()},login:function(e){return fetch(O+"login",{method:"POST",headers:new Headers({"Content-Type":"application/json"}),body:JSON.stringify(e)}).then((function(e){if(e.ok)return e.json();throw new Error("Bad Credentials!")})).then((function(e){var t=e.token;return g.setToken(t)}))},getUser:function(){return g.getUserFromToken()},getProfile:function(e){return fetch(O+e,{headers:{Authorization:"Bearer "+g.getToken()}}).then((function(e){if(e.ok)return e.json();throw new Error("Bad Credentials")}))}},f=n(176),x=n(177),v=n(173),w=n(179),k=n(175);function S(e){var t=Object(r.useState)(""),n=Object(s.a)(t,2),a=n[0],o=n[1],i=Object(r.useState)({username:"",email:"",password:"",passwordConf:""}),b=Object(s.a)(i,2),g=b[0],O=b[1],S=Object(c.g)();function y(e){O(Object(p.a)(Object(p.a)({},g),{},Object(j.a)({},e.target.name,e.target.value)))}function C(){return(C=Object(u.a)(l.a.mark((function t(n){var r,a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(a in n.preventDefault(),r=new FormData,g)r.append(a,g[a]);return t.prev=3,t.next=6,m.signup(r);case 6:e.handleSignUpOrLogin(),S.push("/"),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(3),console.log(t.t0.message),o(t.t0.message);case 14:case"end":return t.stop()}}),t,null,[[3,10]])})))).apply(this,arguments)}return Object(d.jsx)(f.a,{textAlign:"center",style:{height:"100vh"},verticalAlign:"middle",children:Object(d.jsxs)(f.a.Column,{style:{maxWidth:300},children:[Object(d.jsx)(x.a,{as:"h2",color:"#a30f4d",textAlign:"center",children:"Sign Up"}),Object(d.jsxs)(v.a,{autoComplete:"off",onSubmit:function(e){return C.apply(this,arguments)},children:[Object(d.jsxs)(w.a,{stacked:!0,children:[Object(d.jsx)(v.a.Input,{name:"username",placeholder:"User Name",value:g.username,onChange:y,required:!0}),Object(d.jsx)(v.a.Input,{name:"password",type:"password",placeholder:"password",value:g.password,onChange:y,required:!0}),Object(d.jsx)(v.a.Input,{name:"passwordConf",type:"password",placeholder:"Confirm Password",value:g.passwordConf,onChange:y,required:!0}),Object(d.jsx)(k.a,{type:"submit",className:"btn",children:"Sign Up"})]}),a?Object(d.jsx)(h,{error:a}):null]})]})})}n(160);var y=n(174),C=n(57);function U(e){var t=Object(r.useState)(""),n=Object(s.a)(t,2),a=n[0],o=n[1],i=Object(r.useState)({email:"",password:""}),b=Object(s.a)(i,2),g=b[0],O=b[1],S=Object(c.g)();function U(e){O(Object(p.a)(Object(p.a)({},g),{},Object(j.a)({},e.target.name,e.target.value)))}function I(){return(I=Object(u.a)(l.a.mark((function t(n){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.prev=1,t.next=4,m.login(g);case 4:e.handleSignUpOrLogin(),S.push("/"),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),o(t.t0.message);case 11:case"end":return t.stop()}}),t,null,[[1,8]])})))).apply(this,arguments)}return Object(d.jsx)(f.a,{textAlign:"center",style:{height:"100vh"},verticalAlign:"middle",children:Object(d.jsxs)(f.a.Column,{style:{maxWidth:300},children:[Object(d.jsx)(x.a,{as:"h2",color:"#a30f4d",textAlign:"center",children:"Log-In to Your Account"}),Object(d.jsx)(v.a,{autoComplete:"off",onSubmit:function(e){return I.apply(this,arguments)},children:Object(d.jsxs)(w.a,{stacked:!0,children:[Object(d.jsx)(v.a.Input,{type:"email",name:"email",placeholder:"email",value:g.email,onChange:U,required:!0}),Object(d.jsx)(v.a.Input,{type:"password",name:"password",placeholder:"password",value:g.password,onChange:U,required:!0}),Object(d.jsx)(k.a,{color:"#a30f4d",fluid:!0,size:"large",type:"submit",className:"btn",children:"LogIn"})]})}),Object(d.jsxs)(y.a,{children:["New to us? ",Object(d.jsx)(C.b,{to:"/signup",children:"Sign Up"})]}),a?Object(d.jsx)(h,{error:a}):null]})})}var I=function(){var e=Object(r.useState)(m.getUser()),t=Object(s.a)(e,2),n=(t[0],t[1]);function a(){n(m.getUser())}return Object(d.jsx)("div",{className:"App",children:Object(d.jsxs)(c.d,{children:[Object(d.jsx)(c.b,{exact:!0,path:"/login",children:Object(d.jsx)(U,{handleSignUpOrLogin:a})}),Object(d.jsx)(c.b,{exact:!0,path:"/signup",children:Object(d.jsx)(S,{handleSignUpOrLogin:a})}),m.getUser()?Object(d.jsx)(c.d,{children:Object(d.jsx)(c.b,{exact:!0,path:"/",children:"Home PAGE COMPONENT WOULD GO HEREE"})}):Object(d.jsx)(c.a,{to:"/login"})]})})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(Object(d.jsx)(C.a,{children:Object(d.jsx)(I,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[161,1,2]]]);
//# sourceMappingURL=main.7b4504d8.chunk.js.map